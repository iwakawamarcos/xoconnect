!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.XoConnect=n():e.XoConnect=n()}(self,(()=>(()=>{"use strict";var e={};return{47:function(e,n){var t,i,o=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))((function(o,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function r(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,r)}c((i=i.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TYPES=n.METHODS=void 0,function(e){e.available="available",e.connect="connect",e.personalSign="personalSign",e.transactionSign="transactionSign"}(t||(n.METHODS=t={})),function(e){e.request="request",e.response="response"}(i||(n.TYPES=i={}));class s{constructor(){this.client=null}static getInstance(){return s.instance||(s.instance=new s),s.instance}isAvailable(){var e;return o(this,void 0,void 0,(function*(){this.sendRequest(t.available);const n=yield this.getResponse(t.available);return null===(e=null==n?void 0:n.data)||void 0===e?void 0:e.active}))}connect(){return o(this,void 0,void 0,(function*(){this.sendRequest(t.connect);const e=yield this.getResponse(t.connect);return this.client=null==e?void 0:e.data,null==e?void 0:e.data}))}getClient(){return this.client}getChains(){var e;return null===(e=this.client)||void 0===e?void 0:e.chains}personalSign(e,n,i){return o(this,void 0,void 0,(function*(){const o={chainID:e,address:n,message:i};this.sendRequest(t.personalSign,o);const s=yield this.getResponse(t.personalSign);return null==s?void 0:s.data}))}transactionSign(e,n,i,s,a){return o(this,void 0,void 0,(function*(){const o={chainID:e,from:n,to:i,value:s,data:a};this.sendRequest(t.transactionSign,o);const r=yield this.getResponse(t.transactionSign);return null==r?void 0:r.data}))}sendRequest(e,n){window.postMessage(JSON.stringify({type:i.request,method:e,params:n}))}getResponse(e){return o(this,void 0,void 0,(function*(){return new Promise((n=>{const t=o=>{var s;if(null===(s=o.data)||void 0===s?void 0:s.length){const s=JSON.parse(o.data);s.type===i.response&&s.method===e&&(window.removeEventListener("message",t),n(s))}};window.addEventListener("message",t,!1)}))}))}}n.default=s}}[47](0,e),e})()));